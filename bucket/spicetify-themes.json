{
    "version": "61bbc8f3665a51848eb4e9e474a1671a89c58995",
    "description": "Community-created themes for Spicetify.",
    "homepage": "https://github.com/morpheusthewhite/spicetify-themes",
    "license": "MIT",
    "depends": "spicetify-cli",
    "url": "https://github.com/morpheusthewhite/spicetify-themes/archive/master.zip",
    "hash": "bebfa16292cb4b0b70763342610824dd01fb08d4da23458346d651e20ae413c0",
    "notes": [
        "The Elementary theme requires the Open Sans and Raleway fonts:",
        "sudo scoop install open-sans raleway",
        "The ShadowCustom theme requires the Ubuntu font:",
        "scoop bucket add nerd-fonts",
        "sudo scoop install Ubuntu-NF"
    ],
    "extract_dir": "spicetify-themes-master",
    "installer": {
        "script": [
            "Get-ChildItem \"$dir\" -Directory | ForEach-Object {",
            "    Remove-Item -ErrorAction Ignore \"$env:USERPROFILE\\.spicetify\\Themes\\$($_.Name)\"",
            "    Copy-Item -Recurse $_.FullName -Destination \"$env:USERPROFILE\\.spicetify\\Themes\"",
            "}",
            "",
            "(Get-Content \"$env:USERPROFILE\\.spicetify\\Themes\\Elementary\\user.css\").Replace('Google Sans', 'Open Sans') | Set-Content \"$env:USERPROFILE\\.spicetify\\Themes\\Elementary\\user.css\"",
            "",
            "$spotify_running = Get-Process Spotify -ErrorAction SilentlyContinue",
            "",
            "if (-not (Test-Path \"$env:APPDATA\\Spotify\\prefs\")) {",
            "    # spicetify-cli refuses to apply without a backup, and spicetify-cli needs a prefs file so it can tell which version of Spotify is currently installed",
            "    $spotify_version = Select-String -Path $(scoop which Spotify) -Pattern '\\d\\.\\d\\.\\d+\\.\\d+\\.[a-z1-9]+' -AllMatches | % { $_.Matches } | % { $_.Value}",
            "    New-Item -ItemType Directory -Force -Path \"$env:APPDATA\\Spotify\" | Out-Null",
            "    Set-Content \"$env:APPDATA\\Spotify\\prefs\" \"app.last-launched-version=`\"$spotify_version`\"\"",
            "}",
            "",
            "spicetify config spotify_path \"$(Split-Path $(scoop which Spotify))\"",
            "spicetify backup apply enable-devtool",
            "",
            "if (-not $spotify_running) {",
            "    $job = Start-Job {",
            "        while ($spotify_process -eq $null) {",
            "            Start-Sleep -Milliseconds 250",
            "            $spotify_process = Get-Process | Where-Object { $_.name -eq 'Spotify' }",
            "        }",
            "",
            "        $spotify_process | ForEach-Object { Stop-Process -Id $_.Id }",
            "    }",
            "",
            "    $job | Wait-Job -Timeout 5",
            "    $job.StopJob()",
            "}"
        ]
    },
    "uninstaller": {
        "script": "Get-ChildItem \"$dir\" | ForEach-Object { Remove-Item -Recurse -ErrorAction Ignore \"$env:USERPROFILE\\.spicetify\\Themes\\$($_.Name)\" }"
    },
    "checkver": {
        "url": "https://github.com/morpheusthewhite/spicetify-themes",
        "regex": "/commit/([a-z1-9]{40})"
    },
    "autoupdate": {
        "url": "https://github.com/morpheusthewhite/spicetify-themes/archive/master.zip"
    }
}
